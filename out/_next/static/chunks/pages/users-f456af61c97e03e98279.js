(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{8030:function(e,s,r){"use strict";r.d(s,{A:function(){return h},U:function(){return f}});var n=r(4942),t=r(1163),i=r(7536),a=r(8834),c=r(9501),l=r(8777),d=r(7439),o=r(5893);function u(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?u(Object(r),!0).forEach((function(s){(0,n.Z)(e,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))}))}return e}function h(e){var s,r,n,u,h=null===e||void 0===e?void 0:e.user,f=!h,p=(0,t.useRouter)(),j=c.Ry().shape({firstName:c.Z_().required("First Name is required"),lastName:c.Z_().required("Last Name is required"),username:c.Z_().required("Username is required"),password:c.Z_().transform((function(e){return""===e?void 0:e})).concat(f?c.Z_().required("Password is required"):null).min(6,"Password must be at least 6 characters")}),b={resolver:(0,a.X)(j)};f||(b.defaultValues=e.user);var x=(0,i.cI)(b),N=x.register,v=x.handleSubmit,w=x.reset,g=x.formState,y=g.errors;return(0,o.jsxs)("form",{onSubmit:v((function(e){return f?function(e){return d.W4.register(e).then((function(){d.Ak.success("User added",{keepAfterRouteChange:!0}),p.push(".")})).catch(d.Ak.error)}(e):function(e,s){return d.W4.update(e,s).then((function(){d.Ak.success("User updated",{keepAfterRouteChange:!0}),p.push("..")})).catch(d.Ak.error)}(h.id,e)})),children:[(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group col",children:[(0,o.jsx)("label",{children:"First Name"}),(0,o.jsx)("input",m(m({name:"firstName",type:"text"},N("firstName")),{},{className:"form-control ".concat(y.firstName?"is-invalid":"")})),(0,o.jsx)("div",{className:"invalid-feedback",children:null===(s=y.firstName)||void 0===s?void 0:s.message})]}),(0,o.jsxs)("div",{className:"form-group col",children:[(0,o.jsx)("label",{children:"Last Name"}),(0,o.jsx)("input",m(m({name:"lastName",type:"text"},N("lastName")),{},{className:"form-control ".concat(y.lastName?"is-invalid":"")})),(0,o.jsx)("div",{className:"invalid-feedback",children:null===(r=y.lastName)||void 0===r?void 0:r.message})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group col",children:[(0,o.jsx)("label",{children:"Username"}),(0,o.jsx)("input",m(m({name:"username",type:"text"},N("username")),{},{className:"form-control ".concat(y.username?"is-invalid":"")})),(0,o.jsx)("div",{className:"invalid-feedback",children:null===(n=y.email)||void 0===n?void 0:n.message})]}),(0,o.jsxs)("div",{className:"form-group col",children:[(0,o.jsxs)("label",{children:["Password",!f&&(0,o.jsx)("em",{className:"ml-1",children:"(Leave blank to keep the same password)"})]}),(0,o.jsx)("input",m(m({name:"password",type:"password"},N("password")),{},{className:"form-control ".concat(y.password?"is-invalid":"")})),(0,o.jsx)("div",{className:"invalid-feedback",children:null===(u=y.password)||void 0===u?void 0:u.message})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsxs)("button",{type:"submit",disabled:g.isSubmitting,className:"btn btn-primary mr-2",children:[g.isSubmitting&&(0,o.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Save"]}),(0,o.jsx)("button",{onClick:function(){return w(b.defaultValues)},type:"button",disabled:g.isSubmitting,className:"btn btn-secondary",children:"Reset"}),(0,o.jsx)(l.rU,{href:"/users",className:"btn btn-link",children:"Cancel"})]})]})}function f(e){var s=e.children;return(0,o.jsx)("div",{className:"p-4",children:(0,o.jsx)("div",{className:"container",children:s})})}},5044:function(e,s,r){"use strict";r.r(s);var n=r(7294),t=r(8777),i=r(8030),a=r(7439),c=r(5893);s.default=function(){var e=(0,n.useState)(null),s=e[0],r=e[1];return(0,n.useEffect)((function(){a.W4.getAll().then((function(e){return r(e)}))}),[]),(0,c.jsxs)(i.U,{children:[(0,c.jsx)("h1",{children:"Users"}),(0,c.jsx)(t.rU,{href:"/users/add",className:"btn btn-sm btn-success mb-2",children:"Add User"}),(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:"30%"},children:"First Name"}),(0,c.jsx)("th",{style:{width:"30%"},children:"Last Name"}),(0,c.jsx)("th",{style:{width:"30%"},children:"Username"}),(0,c.jsx)("th",{style:{width:"10%"}})]})}),(0,c.jsxs)("tbody",{children:[s&&s.map((function(e){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.firstName}),(0,c.jsx)("td",{children:e.lastName}),(0,c.jsx)("td",{children:e.username}),(0,c.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[(0,c.jsx)(t.rU,{href:"/users/edit/".concat(e.id),className:"btn btn-sm btn-primary mr-1",children:"Edit"}),(0,c.jsx)("button",{onClick:function(){return n=e.id,r(s.map((function(e){return e.id===n&&(e.isDeleting=!0),e}))),void a.W4.delete(n).then((function(){r((function(e){return e.filter((function(e){return e.id!==n}))}))}));var n},className:"btn btn-sm btn-danger btn-delete-user",disabled:e.isDeleting,children:e.isDeleting?(0,c.jsx)("span",{className:"spinner-border spinner-border-sm"}):(0,c.jsx)("span",{children:"Delete"})})]})]},e.id)})),!s&&(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"4",children:(0,c.jsx)(t.$j,{})})}),s&&!s.length&&(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"4",className:"text-center",children:(0,c.jsx)("div",{className:"p-2",children:"No Users To Display"})})})]})]})]})}},2261:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return r(5044)}])}},function(e){e.O(0,[752,774,888,179],(function(){return s=2261,e(e.s=s);var s}));var s=e.O();_N_E=s}]);